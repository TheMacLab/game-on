function go_update_bonus_loot(){jQuery("#go_bonus_loot").html('<span class="go_loading"></span>');var e=GO_EVERY_PAGE_DATA.nonces.go_update_bonus_loot,t=go_task_data.ID;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_update_bonus_loot",post_id:t},success:function(e){console.log("Bonus Loot"),console.log(e),jQuery("#go_bonus_loot").remove(),jQuery("#go_wrapper").append(e)}})}function getTimeRemaining(e){var t=e-Date.parse(new Date),o=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24),s;return{total:t,days:Math.floor(t/864e5),hours:a,minutes:r,seconds:o}}function initializeClock(e,t){function o(){var e=getTimeRemaining(t),o;(e.days=Math.max(0,e.days),a.innerHTML=e.days,e.hours=Math.max(0,e.hours),s.innerHTML=("0"+e.hours).slice(-2),e.minutes=Math.max(0,e.minutes),n.innerHTML=("0"+e.minutes).slice(-2),e.seconds=Math.max(0,e.seconds),i.innerHTML=("0"+e.seconds).slice(-2),e.total=0)&&(clearInterval(u),new Audio(PluginDir.url+"media/sounds/airhorn.mp3").play())}console.log("initializeClock"),t+=Date.parse(new Date);var r=document.getElementById(e),a=r.querySelector(".days"),s=r.querySelector(".hours"),n=r.querySelector(".minutes"),i=r.querySelector(".seconds");o();var _=getTimeRemaining(t),l=_.total;if(console.log("total"+_.total),l>0)var u=setInterval(o,1e3)}function go_timer_abandon(){var e=go_task_data.redirectURL;window.location=e}function flash_error_msg(e){var t=jQuery(e).css("background-color");void 0===typeof t&&(t="white"),jQuery(e).animate({color:t},200,function(){jQuery(e).animate({color:"red"},200)})}function task_stage_change(e){console.log("change");var t="";void 0!==jQuery(e).attr("button_type")&&(t=jQuery(e).attr("button_type")),console.log("Button:"+t);var o="";void 0!==jQuery(e).attr("status")&&(o=jQuery(e).attr("status"));var r="";void 0!==jQuery(e).attr("next_bonus")&&(r=jQuery(e).attr("next_bonus"));var a="";void 0!==jQuery(e).attr("check_type")&&(a=jQuery(e).attr("check_type"));var s="";void 0!==jQuery(e).attr("blog_post_id")&&(a=jQuery(e).attr("blog_post_id"));var n=jQuery("#go_result").attr("value");if("blog"==a&&"undo_last_bonus"!=t){n=go_get_tinymce_content_blog("task_stage_change");var i=jQuery("#go_blog_title").val(),s=jQuery("#go_blog_title").data("blog_post_id"),_=jQuery("#go_result_url").val(),l=jQuery("#go_result_media").attr("value"),u=jQuery("#go_result_video").val()}else var i=null;jQuery.ajax({type:"POST",data:{_ajax_nonce:go_task_data.go_task_change_stage,action:"go_task_change_stage",post_id:go_task_data.ID,user_id:go_task_data.userID,status:o,next_bonus:r,button_type:t,check_type:a,result:n,result_title:i,blog_post_id:s,blog_url:_,blog_media:l,blog_video:u},success:function(e){var t={};try{var t=JSON.parse(e)}catch(e){t={json_status:"101",timer_start:"",button_type:"",time_left:"",html:"",redirect:"",rewards:{gold:0}}}if("101"===Number.parseInt(t.json_status)){console.log(101),jQuery("#go_stage_error_msg").show();var o="Server Error.";jQuery("#go_stage_error_msg").text()!=o?jQuery("#go_stage_error_msg").text(o):flash_error_msg("#go_stage_error_msg")}else if(302===Number.parseInt(t.json_status))console.log(302),window.location=t.location;else if("refresh"==t.json_status)location.reload();else if("bad_password"==t.json_status){jQuery("#go_stage_error_msg").show();var o="Invalid password.";jQuery("#go_stage_error_msg").text()!=o?jQuery("#go_stage_error_msg").text(o):flash_error_msg("#go_stage_error_msg"),go_disable_loading()}else{if("undo"==t.button_type)jQuery("#go_wrapper div").last().hide(),jQuery("#go_wrapper > div").slice(-3).hide("slow",function(){jQuery(this).remove()});else if("undo_last"==t.button_type)jQuery("#go_wrapper div").last().hide(),jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()});else if("continue"==t.button_type||"complete"==t.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("show_bonus"==t.button_type)jQuery("#go_buttons").remove(),jQuery(".go_checks_and_buttons").removeClass("active");else if("continue_bonus"==t.button_type||"complete_bonus"==t.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("undo_bonus"==t.button_type)jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()});else if("undo_last_bonus"==t.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("abandon_bonus"==t.button_type)jQuery("#go_wrapper > div").slice(-3).remove();else if("abandon"==t.button_type)window.location=t.redirect;else if("timer"==t.button_type){var r;jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()}),new Audio(PluginDir.url+"media/sounds/airhorn.mp3").play()}go_append(t)}}})}function go_mce_reset(){tinymce.execCommand("mceRemoveEditor",!0,"go_blog_post"),tinymce.execCommand("mceAddEditor",!0,"go_blog_post")}function go_append(e){jQuery(e.html).appendTo("#go_wrapper").stop().hide().show("slow").promise().then(function(){go_Vids_Fit_and_Box("body"),go_make_clickable(),go_disable_loading();var e="go_blog_post";tinymce.execCommand("mceRemoveEditor",!0,e),quicktags({id:e}),tinymce.init({selector:e,branding:!1,theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!0,plugins:"charmap,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,wordcount",selector:"#"+e,resize:"vertical",menubar:!1,wpautop:!0,wordpress_adv_hidden:!1,indent:!1,toolbar1:"formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"id post-type-post post-status-publish post-format-standard"}),tinyMCE.execCommand("mceAddEditor",!1,e)})}function go_make_clickable(){jQuery(".clickable").keyup(function(e){13===e.which&&jQuery("#go_button").click()})}function go_update_admin_view(e){jQuery.ajax({type:"POST",url:MyAjax.ajaxurl,data:{_ajax_nonce:GO_EVERY_PAGE_DATA.nonces.go_update_admin_view,action:"go_update_admin_view",go_admin_view:e},success:function(e){location.reload()},error:function(e){console.log(e),console.log("fail")}})}function go_quiz_check_answers(e,t){var o=jQuery(".go_test_list"),r=o.length;if(jQuery(".go_test_list :checked").length>=r){var a=[];if(jQuery(".go_test_list").length>1){for(var s=[],n=0;n<r;n++){var i=o[n].children[1].children[0].type;a.push(i);var _="#"+o[n].id+" :checked",l=jQuery(_);if("radio"==i)null!=l[0]&&s.push(l[0].value);else if("checkbox"==i){for(var u=[],g=0;g<l.length;g++)u.push(l[g].value);var c=u.join("### ");s.push(c)}}var d=s.join("#### "),y=a.join("### ")}else{var p=jQuery(".go_test_list li input:checked"),y;if("radio"==(y=jQuery(".go_test_list li input").first().attr("type")))var d=p[0].value;else if("checkbox"==y){for(var d=[],g=0;g<p.length;g++)d.push(p[g].value);d=d.join("### ")}}}jQuery.ajax({type:"POST",data:{_ajax_nonce:go_task_data.go_unlock_stage,action:"go_unlock_stage",task_id:go_task_data.ID,user_id:go_task_data.userID,list_size:r,chosen_answer:d,type:y,status:e},success:function(e){if("refresh"==e)location.reload();else{if(1==e)return jQuery(".go_test_container").hide("slow"),jQuery("#test_failure_msg").hide("slow"),jQuery(".go_test_submit_div").hide("slow"),jQuery(".go_wrong_answer_marker").hide(),jQuery("#go_stage_error_msg").hide(),task_stage_change(t),0;if(0==e)return jQuery("#go_stage_error_msg").show(),jQuery("#go_stage_error_msg").text("Wrong answer, try again!"),1;if("string"==typeof e&&r>1){console.log("response"+e);for(var a=e.split(", "),s=0;s<o.length;s++){var n="#"+o[s].id;-1===jQuery.inArray(n,a)?(jQuery(n+" .go_wrong_answer_marker").is(":visible")&&jQuery(n+" .go_wrong_answer_marker").hide(),jQuery(n+" .go_correct_answer_marker").is(":visible")||jQuery(n+" .go_correct_answer_marker").show()):(jQuery(n+" .go_correct_answer_marker").is(":visible")&&jQuery(n+" .go_correct_answer_marker").hide(),jQuery(n+" .go_wrong_answer_marker").is(":visible")||jQuery(n+" .go_wrong_answer_marker").show())}var i;return void("Wrong answer, try again!"!=jQuery("#go_stage_error_msg").text()?(jQuery("#go_stage_error_msg").show(),jQuery("#go_stage_error_msg").text("Wrong answer, try again!")):flash_error_msg("#go_stage_error_msg"))}}}})}jQuery(document).ready(function(){jQuery.ajaxSetup({url:go_task_data.url+="/wp-admin/admin-ajax.php"}),go_make_clickable(),jQuery(".go_stage_message").show();var e=jQuery("#go_select_admin_view").val();console.log(e),"all"!=e&&(jQuery("#go_button").one("click",function(e){task_stage_check_input(this,!0)}),jQuery("#go_back_button").one("click",function(e){task_stage_change(this)}),jQuery("#go_save_button").one("click",function(e){go_blog_submit(this,!1)})),jQuery("#go_bonus_button").one("click",function(e){go_update_bonus_loot(this)}),jQuery(".progress").closest(".go_checks_and_buttons").addClass("active"),jQuery("#go_admin_override").appendTo(".go_locks"),jQuery("#go_admin_override").click(function(){jQuery(".go_password").show()})});